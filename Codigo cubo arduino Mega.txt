#include <SPI.h>
#include <MFRC522.h>


#define LED_PIN 4  // Define el pin del LED
const int RST_pin = 5; //Pin para resetear todos los modulos
const int SS_pin = 53; //Pin de selección del módulo/esclavo. También llamado SDA.
const int SS_pin2 = 46;  // Pin de selección para el segundo módulo MFRC522
const int SS_pin3 = 42;  // Pin de selección para el tercer  módulo MFRC522

MFRC522 mfrc522(SS_pin, RST_pin);  // Crear instancia MFRC522.
MFRC522 mfrc522_2(SS_pin2, RST_pin);  // Instancia para el segundo módulo
MFRC522 mfrc522_3(SS_pin3, RST_pin);  // Instancia para el tercer módulo
void setup() {
  Serial.begin(115200); //Inicia puerto serial
  SPI.begin(); //Inicia comunicación por SPI
  mfrc522.PCD_Init(); //Inicia el módulo MFRC522 con el nombre de objeto declarado anteriormente
  mfrc522_2.PCD_Init(); //Inicia el módulo MFRC522_2 con el nombre de objeto declarado anteriormente
}

void checkForCard(MFRC522& mfrc522) {
  if (mfrc522.PICC_IsNewCardPresent() && mfrc522.PICC_ReadCardSerial()) {
    Serial.print("UID:");
    for (byte i = 0; i < mfrc522.uid.size; i++) {
      Serial.print(mfrc522.uid.uidByte[i] < 0x10 ? " 0" : " ");
      Serial.print(mfrc522.uid.uidByte[i], HEX);
    }
    Serial.println();
    mfrc522.PICC_HaltA();

    digitalWrite(LED_PIN, HIGH);
    delay(3000); 
    digitalWrite(LED_PIN, LOW);
  }
}

void loop() {
  checkForCard(mfrc522);
  checkForCard(mfrc522_2);
  checkForCard(mfrc522_3);
 

  delay(250); // Este delay podría ajustarse según tus necesidades
}